<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>
      
        
          N Queens Problem - Backtracking - Zolmeister - by Zoli Kahan
        
      
    </title>
    <meta name="description" content="Zolmeister - Blog - by Zoli Kahan" />
    <link href='https://zolmeister.com/favicon.ico' rel='icon' type='image/x-icon'/>

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />
    <!-- This is for syntax highlight -->
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css">
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="Zolmeister - Atom" href="https://www.zolmeister.com/feeds/posts/default" />
    <link rel="alternate" type="application/rss+xml" title="Zolmeister - RSS" href="https://www.zolmeister.com/feeds/posts/default?alt=rss" />

</head>
<body class="home-template">


    <main class="content" role="main">

    <article class="post">
        <header class="post-header">
            <a id="blog-logo" href="/">
                
                    <span class="blog-title">Zolmeister</span>
                
            </a>
        </header>

        <span class="post-meta">
        	<time datetime="2014-01-16">16 Jan 2014</time>
        	<!--
        		on
	        	
	        -->
       	</span>

        <h1 class="post-title"><a href="">N Queens Problem - Backtracking</a></h1>

        <section class="post-content">
            <style>
.clearfix-7da63{clear:both}
.board-b72b1{border:2px solid #404040;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}
.square-55d63{float:left;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.white-1e1d7{background-color:#f0d9b5;color:#b58863}
.black-3c85d{background-color:#b58863;color:#f0d9b5}
.highlight1-32417,.highlight2-9c5d2{-webkit-box-shadow:inset 0 0 3px 3px #FF0;-moz-box-shadow:inset 0 0 3px 3px #FF0;box-shadow:inset 0 0 3px 3px #FF0}
.notation-322f9{cursor:default;font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-size:14px;position:absolute}
.alpha-d2270{bottom:1px;right:3px}
.numeric-fc462{top:2px;left:2px}
#board img { padding: 0; border: 0; -webkit-box-shadow: inherit; -moz-box-shadow: inherit;box-shadow: inherit; }
</style>

<p>The <a href="http://en.wikipedia.org/wiki/Eight_queens_puzzle">N Queens problem</a> is a simple yet effective way of assessing a developer&#39;s ability to use recursion. For that reason, it may show up during technical interviews, so I wrote a quick little example using the <a href="http://chessboardjs.com/">chessboard.js</a> library for visualization.</p>

<p>Link:&nbsp;<a href="http://queens.zolmeister.com/">http://queens.zolmeister.com/</a>
Source:&nbsp;<a href="https://github.com/Zolmeister/queens">https://github.com/Zolmeister/queens</a></p>

<p>Here is a simple solution in JavaScript:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">solve</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ans</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="nx">solver</span><span class="p">([])</span>
  <span class="k">return</span> <span class="nx">ans</span>
  <span class="kd">function</span> <span class="nx">solver</span><span class="p">(</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="nx">n</span><span class="p">)</span>
      <span class="nx">ans</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">current</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">l</span><span class="o">=</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">prev</span> <span class="o">=</span> <span class="nx">current</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span> <span class="o">===</span> <span class="nx">i</span><span class="p">)</span>
            <span class="k">break</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span><span class="o">-</span><span class="p">(</span><span class="nx">l</span><span class="o">-</span><span class="nx">j</span><span class="p">)</span> <span class="o">===</span> <span class="nx">i</span><span class="p">)</span>
            <span class="k">break</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span><span class="o">+</span><span class="p">(</span><span class="nx">l</span><span class="o">-</span><span class="nx">j</span><span class="p">)</span> <span class="o">===</span> <span class="nx">i</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">===</span> <span class="nx">l</span><span class="p">)</span>
          <span class="nx">solver</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="nx">i</span><span class="p">]))</span>
      <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>My solution uses a technique called backtracking, which is basically depth-first search without an end condition. Note that I do not recommend the pattern above with a &#39;return&#39; above a function, but it provides an interesting exercise for those who have never seen it before to understand <a href="http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html">JavaScript hoisting</a>.</p>

<p>The algorithm moves left to right, placing a queen in the next available column. The key to the above code is the inner loop. This is what checks to see if a move is legal, such that no other queen on the board conflicts with the one to be placed. After that, it is simple recursion, with a condition that if the board is full then add it to the solution set.</p>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script>
(function(){function l(f){return"string"!==typeof f?!1:-1!==f.search(/^[a-h][1-8]$/)}function Q(f){if("string"!==typeof f)return!1;f=f.replace(/ .+$/,"");f=f.split("/");if(8!==f.length)return!1;for(var b=0;8>b;b++)if(""===f[b]||8<f[b].length||-1!==f[b].search(/[^kqrbnpKQRNBP1-8]/))return!1;return!0}function F(f){if("object"!==typeof f)return!1;for(var b in f)if(!0===f.hasOwnProperty(b)){var n;(n=!0!==l(b))||(n=f[b],n="string"!==typeof n?!1:-1!==n.search(/^[bw][KQRNBP]$/),n=!0!==n);if(n)return!1}return!0}
function K(f){if(!0!==Q(f))return!1;f=f.replace(/ .+$/,"");f=f.split("/");for(var b={},n=8,m=0;8>m;m++){for(var l=f[m].split(""),s=0,w=0;w<l.length;w++)if(-1!==l[w].search(/[1-8]/))var I=parseInt(l[w],10),s=s+I;else{var I=b,F=B[s]+n,x;x=l[w];x=x.toLowerCase()===x?"b"+x.toUpperCase():"w"+x.toUpperCase();I[F]=x;s++}n--}return b}function L(f){if(!0!==F(f))return!1;for(var b="",n=8,m=0;8>m;m++){for(var l=0;8>l;l++){var s=B[l]+n;!0===f.hasOwnProperty(s)?(s=f[s].split(""),s="w"===s[0]?s[1].toUpperCase():
s[1].toLowerCase(),b+=s):b+="1"}7!==m&&(b+="/");n--}b=b.replace(/11111111/g,"8");b=b.replace(/1111111/g,"7");b=b.replace(/111111/g,"6");b=b.replace(/11111/g,"5");b=b.replace(/1111/g,"4");b=b.replace(/111/g,"3");return b=b.replace(/11/g,"2")}var B="abcdefgh".split("");window.ChessBoard=window.ChessBoard||function(f,b){function n(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,function(a){return(16*Math.random()|0).toString(16)})}function m(a){return JSON.parse(JSON.stringify(a))}function X(a){a=
a.split(".");return{major:parseInt(a[0],10),minor:parseInt(a[1],10),patch:parseInt(a[2],10)}}function s(a,e,c){if(!0===b.hasOwnProperty("showErrors")&&!1!==b.showErrors){var d="ChessBoard Error "+a+": "+e;"console"===b.showErrors&&"object"===typeof console&&"function"===typeof console.log?(console.log(d),2<=arguments.length&&console.log(c)):"alert"===b.showErrors?(c&&(d+="\n\n"+JSON.stringify(c)),window.alert(d)):"function"===typeof b.showErrors&&b.showErrors(a,e,c)}}function w(a){return"fast"===
a||"slow"===a?!0:parseInt(a,10)+""!==a+""?!1:0<=a}function I(){var a='<div class="'+h.chessboard+'">';!0===b.sparePieces&&(a+='<div class="'+h.sparePieces+" "+h.sparePiecesTop+'"></div>');a+='<div class="'+h.board+'"></div>';!0===b.sparePieces&&(a+='<div class="'+h.sparePieces+" "+h.sparePiecesBottom+'"></div>');return a+"</div>"}function fa(a){"black"!==a&&(a="white");var e="",c=m(B),d=8;"black"===a&&(c.reverse(),d=1);for(var C="white",f=0;8>f;f++){for(var e=e+('<div class="'+h.row+'">'),k=0;8>k;k++){var g=
c[k]+d,e=e+('<div class="'+h.square+" "+h[C]+" square-"+g+'" style="width: '+r+"px; height: "+r+'px" id="'+p[g]+'" data-square="'+g+'">');if(!0===b.showNotation){if("white"===a&&1===d||"black"===a&&8===d)e+='<div class="'+h.notation+" "+h.alpha+'">'+c[k]+"</div>";0===k&&(e+='<div class="'+h.notation+" "+h.numeric+'">'+d+"</div>")}e+="</div>";C="white"===C?"black":"white"}e+='<div class="'+h.clearfix+'"></div></div>';C="white"===C?"black":"white";"white"===a?d--:d++}return e}function x(a){return"data:image/png;base64,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"}
function D(a,b,c){var d='<img src="'+x(a)+'" ';c&&"string"===typeof c&&(d+='id="'+c+'" ');d+='alt="" class="'+h.piece+'" data-piece="'+a+'" style="width: '+r+"px;height: "+r+"px;";!0===b&&(d+="display:none;");return d+'" />'}function M(a){var b="wK wQ wR wB wN wP".split(" ");"black"===a&&(b="bK bQ bR bB bN bP".split(" "));a="";for(var c=0;c<b.length;c++)a+=D(b[c],!1,N[b[c]]);return a}function ga(a,e,c,d){a=$("#"+p[a]);var C=a.offset(),f=$("#"+p[e]);e=f.offset();var k=n();$("body").append(D(c,!0,k));
var g=$("#"+k);g.css({display:"",position:"absolute",top:C.top,left:C.left});a.find("."+h.piece).remove();g.animate(e,{duration:b.moveSpeed,complete:function(){f.append(D(c));g.remove();"function"===typeof d&&d()}})}function ha(a,e,c){var d=$("#"+N[a]).offset(),f=$("#"+p[e]);e=f.offset();var g=n();$("body").append(D(a,!0,g));var k=$("#"+g);k.css({display:"",position:"absolute",left:d.left,top:d.top});k.animate(e,{duration:b.moveSpeed,complete:function(){f.find("."+h.piece).remove();f.append(D(a));
k.remove();"function"===typeof c&&c()}})}function ia(a,e,c){function d(){f++;if(f===a.length&&(G(),!0===b.hasOwnProperty("onMoveEnd")&&"function"===typeof b.onMoveEnd))b.onMoveEnd(m(e),m(c))}for(var f=0,g=0;g<a.length;g++)"clear"===a[g].type&&$("#"+p[a[g].square]+" ."+h.piece).fadeOut(b.trashSpeed,d),"add"===a[g].type&&!0!==b.sparePieces&&$("#"+p[a[g].square]).append(D(a[g].piece,!0)).find("."+h.piece).fadeIn(b.appearSpeed,d),"add"===a[g].type&&!0===b.sparePieces&&ha(a[g].piece,a[g].square,d),"move"===
a[g].type&&ga(a[g].source,a[g].destination,a[g].piece,d)}function ja(a,b){a=a.split("");var c=B.indexOf(a[0])+1,d=parseInt(a[1],10);b=b.split("");var g=B.indexOf(b[0])+1,f=parseInt(b[1],10),c=Math.abs(c-g),d=Math.abs(d-f);return c>=d?c:d}function ka(a){for(var b=[],c=0;8>c;c++)for(var d=0;8>d;d++){var g=B[c]+(d+1);a!==g&&b.push({square:g,distance:ja(a,g)})}b.sort(function(a,b){return a.distance-b.distance});a=[];for(c=0;c<b.length;c++)a.push(b[c].square);return a}function G(){y.find("."+h.piece).remove();
for(var a in g)!0===g.hasOwnProperty(a)&&$("#"+p[a]).append(D(g[a]))}function R(){y.html(fa(u));G();!0===b.sparePieces&&("white"===u?(S.html(M("black")),T.html(M("white"))):(S.html(M("white")),T.html(M("black"))))}function O(a){var e=m(g),c=m(a),d=L(e),f=L(c);if(d!==f){if(!0===b.hasOwnProperty("onChange")&&"function"===typeof b.onChange)b.onChange(e,c);g=a}}function U(a,b){for(var c in J)if(!0===J.hasOwnProperty(c)){var d=J[c];if(a>=d.left&&a<d.left+r&&b>=d.top&&b<d.top+r)return c}return"offboard"}
function V(){y.find("."+h.square).removeClass(h.highlight1+" "+h.highlight2)}function la(){function a(){G();z.css("display","none");if(!0===b.hasOwnProperty("onSnapbackEnd")&&"function"===typeof b.onSnapbackEnd)b.onSnapbackEnd(E,t,m(g),u)}if("spare"===t)Y();else{V();var e=$("#"+p[t]).offset();z.animate(e,{duration:b.snapbackSpeed,complete:a});A=!1}}function Y(){V();var a=m(g);delete a[t];O(a);G();z.fadeOut(b.trashSpeed);A=!1}function ma(a){V();var e=m(g);delete e[t];e[a]=E;O(e);e=$("#"+p[a]).offset();
z.animate(e,{duration:b.snapSpeed,complete:function(){G();z.css("display","none");if(!0===b.hasOwnProperty("onSnapEnd")&&"function"===typeof b.onSnapEnd)b.onSnapEnd(t,a,E)}});A=!1}function P(a,e,c,d){if("function"!==typeof b.onDragStart||!1!==b.onDragStart(a,e,m(g),u)){A=!0;E=e;t=a;H="spare"===a?"offboard":a;J={};for(var f in p)!0===p.hasOwnProperty(f)&&(J[f]=$("#"+p[f]).offset());z.attr("src",x(e)).css({display:"",position:"absolute",left:c-r/2,top:d-r/2});"spare"!==a&&$("#"+p[a]).addClass(h.highlight1).find("."+
h.piece).css("display","none")}}function Z(a,e){z.css({left:a-r/2,top:e-r/2});var c=U(a,e);if(c!==H){!0===l(H)&&$("#"+p[H]).removeClass(h.highlight2);!0===l(c)&&$("#"+p[c]).addClass(h.highlight2);if("function"===typeof b.onDragMove)b.onDragMove(c,H,t,E,m(g),u);H=c}}function aa(a){var e="drop";"offboard"===a&&"snapback"===b.dropOffBoard&&(e="snapback");"offboard"===a&&"trash"===b.dropOffBoard&&(e="trash");if(!0===b.hasOwnProperty("onDrop")&&"function"===typeof b.onDrop){var c=m(g);"spare"===t&&!0===
l(a)&&(c[a]=E);!0===l(t)&&"offboard"===a&&delete c[t];!0===l(t)&&!0===l(a)&&(delete c[t],c[a]=E);var d=m(g),c=b.onDrop(t,a,E,c,d,u);if("snapback"===c||"trash"===c)e=c}"snapback"===e?la():"trash"===e?Y():"drop"===e&&ma(a)}function na(a){a.preventDefault()}function oa(a){if(!0===b.draggable){var e=$(this).attr("data-square");!0===l(e)&&!0===g.hasOwnProperty(e)&&P(e,g[e],a.pageX,a.pageY)}}function pa(a){if(!0===b.draggable){var e=$(this).attr("data-square");!0===l(e)&&!0===g.hasOwnProperty(e)&&(a=a.originalEvent,
P(e,g[e],a.changedTouches[0].pageX,a.changedTouches[0].pageY))}}function qa(a){if(!0===b.sparePieces){var e=$(this).attr("data-piece");P("spare",e,a.pageX,a.pageY)}}function ra(a){if(!0===b.sparePieces){var e=$(this).attr("data-piece");a=a.originalEvent;P("spare",e,a.changedTouches[0].pageX,a.changedTouches[0].pageY)}}function ba(a){!0===A&&Z(a.pageX,a.pageY)}function sa(a){!0===A&&(a.preventDefault(),Z(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY))}function ca(a){!0===
A&&(a=U(a.pageX,a.pageY),aa(a))}function ta(a){!0===A&&(a=U(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY),aa(a))}function ua(a){if(!1===A&&!0===b.hasOwnProperty("onMouseoverSquare")&&"function"===typeof b.onMouseoverSquare&&(a=$(a.currentTarget).attr("data-square"),!0===l(a))){var e=!1;!0===g.hasOwnProperty(a)&&(e=g[a]);b.onMouseoverSquare(a,e,m(g),u)}}function va(a){if(!1===A&&!0===b.hasOwnProperty("onMouseoutSquare")&&"function"===typeof b.onMouseoutSquare&&(a=
$(a.currentTarget).attr("data-square"),!0===l(a))){var e=!1;!0===g.hasOwnProperty(a)&&(e=g[a]);b.onMouseoutSquare(a,e,m(g),u)}}function wa(){$("body").on("mousedown mousemove","."+h.piece,na);y.on("mousedown","."+h.square,oa);v.on("mousedown","."+h.sparePieces+" ."+h.piece,qa);y.on("mouseenter","."+h.square,ua);y.on("mouseleave","."+h.square,va);!0===(navigator&&navigator.userAgent&&-1!==navigator.userAgent.search(/MSIE/))?(document.ondragstart=function(){return!1},$("body").on("mousemove",ba),$("body").on("mouseup",
ca)):($(window).on("mousemove",ba),$(window).on("mouseup",ca));!0==="ontouchstart"in document.documentElement&&(y.on("touchstart","."+h.square,pa),v.on("touchstart","."+h.sparePieces+" ."+h.piece,ra),$(window).on("touchmove",sa),$(window).on("touchend",ta))}function xa(){for(var a=0;a<B.length;a++)for(var e=1;8>=e;e++){var c=B[a]+e;p[c]=c+"-"+n()}e="KQRBNP".split("");for(a=0;a<e.length;a++){var c="w"+e[a],d="b"+e[a];N[c]=c+"-"+n();N[d]=d+"-"+n()}v.html(I());y=v.find("."+h.board);!0===b.sparePieces&&
(S=v.find("."+h.sparePiecesTop),T=v.find("."+h.sparePiecesBottom));a=n();$("body").append(D("wP",!0,a));z=$("#"+a);da=parseInt(y.css("borderLeftWidth"),10);q.resize()}b=b||{};var ea=K("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),h={alpha:"alpha-d2270",black:"black-3c85d",board:"board-b72b1",chessboard:"chessboard-63f37",clearfix:"clearfix-7da63",highlight1:"highlight1-32417",highlight2:"highlight2-9c5d2",notation:"notation-322f9",numeric:"numeric-fc462",piece:"piece-417db",row:"row-5277c",sparePieces:"spare-pieces-7492f",
sparePiecesBottom:"spare-pieces-bottom-ae20f",sparePiecesTop:"spare-pieces-top-4028b",square:"square-55d63",white:"white-1e1d7"},v,y,z,S,T,q={},da=2,u="white",g={},r,E,H,t,A=!1,N={},p={},J;q.clear=function(a){q.position({},a)};q.destroy=function(){v.html("");z.remove();v.unbind()};q.fen=function(){return q.position("fen")};q.flip=function(){q.orientation("flip")};q.move=function(){if(0!==arguments.length){for(var a=!0,b={},c=0;c<arguments.length;c++)if(!1===arguments[c])a=!1;else{var d;d=arguments[c];
"string"!==typeof d?d=!1:(d=d.split("-"),d=2!==d.length?!1:!0===l(d[0])&&!0===l(d[1]));!0!==d?s(2826,"Invalid move passed to the move method.",arguments[c]):(d=arguments[c].split("-"),b[d[0]]=d[1])}var c=g,c=m(c),f;for(f in b)!0===b.hasOwnProperty(f)&&!0===c.hasOwnProperty(f)&&(d=c[f],delete c[f],c[b[f]]=d);b=c;q.position(b,a);return b}};q.orientation=function(a){if(0===arguments.length)return u;"white"===a||"black"===a?(u=a,R()):"flip"===a?(u="white"===u?"black":"white",R()):s(5482,"Invalid value passed to the orientation method.",
a)};q.position=function(a,b){if(0===arguments.length)return m(g);if("string"===typeof a&&"fen"===a.toLowerCase())return L(g);!1!==b&&(b=!0);"string"===typeof a&&"start"===a.toLowerCase()&&(a=m(ea));!0===Q(a)&&(a=K(a));if(!0!==F(a))s(6482,"Invalid value passed to the position method.",a);else if(!0===b){var c=g,d=a,c=m(c),d=m(d),f=[],h={},k;for(k in d)!0===d.hasOwnProperty(k)&&!0===c.hasOwnProperty(k)&&c[k]===d[k]&&(delete c[k],delete d[k]);for(k in d)if(!0===d.hasOwnProperty(k)){var l;a:{l=c;for(var n=
d[k],r=ka(k),p=0;p<r.length;p++){var q=r[p];if(!0===l.hasOwnProperty(q)&&l[q]===n){l=q;break a}}l=!1}!1!==l&&(f.push({type:"move",source:l,destination:k,piece:d[k]}),delete c[l],delete d[k],h[k]=!0)}for(k in d)!0===d.hasOwnProperty(k)&&(f.push({type:"add",square:k,piece:d[k]}),delete d[k]);for(k in c)!0===c.hasOwnProperty(k)&&!0!==h.hasOwnProperty(k)&&(f.push({type:"clear",square:k,piece:c[k]}),delete c[k]);ia(f,g,a);O(a)}else O(a),G()};q.resize=function(){var a=parseInt(v.css("width"),10);if(!a||
0>=a)r=0;else{for(a-=1;0!==a%8&&0<a;)a--;r=a/8}y.css("width",8*r+"px");z.css({height:r,width:r});!0===b.sparePieces&&v.find("."+h.sparePieces).css("paddingLeft",r+da+"px");R()};q.start=function(a){q.position("start",a)};var W;if(W=!0===function(){if("string"===typeof f){if(""===f)return window.alert("ChessBoard Error 1001: The first argument to ChessBoard() cannot be an empty string.\n\nExiting..."),!1;var a=document.getElementById(f);if(!a)return window.alert('ChessBoard Error 1002: Element with id "'+
f+'" does not exist in the DOM.\n\nExiting...'),!1;v=$(a)}else if(v=$(f),1!==v.length)return window.alert("ChessBoard Error 1003: The first argument to ChessBoard() must be an ID or a single DOM node.\n\nExiting..."),!1;if(!window.JSON||"function"!==typeof JSON.stringify||"function"!==typeof JSON.parse)return window.alert("ChessBoard Error 1004: JSON does not exist. Please include a JSON polyfill.\n\nExiting..."),!1;if(a=typeof window.$)if(a=$.fn)if(a=$.fn.jquery)var a=$.fn.jquery,b="1.7.0",a=X(a),
b=X(b),a=!0===1E8*a.major+1E4*a.minor+a.patch>=1E8*b.major+1E4*b.minor+b.patch;return a?!0:(window.alert("ChessBoard Error 1005: Unable to find a valid version of jQuery. Please include jQuery 1.7.0 or higher on the page.\n\nExiting..."),!1)}()){if("string"===typeof b||!0===F(b))b={position:b};"black"!==b.orientation&&(b.orientation="white");u=b.orientation;!1!==b.showNotation&&(b.showNotation=!0);!0!==b.draggable&&(b.draggable=!1);"trash"!==b.dropOffBoard&&(b.dropOffBoard="snapback");!0!==b.sparePieces&&
(b.sparePieces=!1);!0===b.sparePieces&&(b.draggable=!0);if(!0!==b.hasOwnProperty("pieceTheme")||"string"!==typeof b.pieceTheme&&"function"!==typeof b.pieceTheme)b.pieceTheme="img/chesspieces/wikipedia/{piece}.png";if(!0!==b.hasOwnProperty("appearSpeed")||!0!==w(b.appearSpeed))b.appearSpeed=200;if(!0!==b.hasOwnProperty("moveSpeed")||!0!==w(b.moveSpeed))b.moveSpeed=200;if(!0!==b.hasOwnProperty("snapbackSpeed")||!0!==w(b.snapbackSpeed))b.snapbackSpeed=50;if(!0!==b.hasOwnProperty("snapSpeed")||!0!==w(b.snapSpeed))b.snapSpeed=
25;if(!0!==b.hasOwnProperty("trashSpeed")||!0!==w(b.trashSpeed))b.trashSpeed=100;!0===b.hasOwnProperty("position")&&("start"===b.position?g=m(ea):!0===Q(b.position)?g=K(b.position):!0===F(b.position)?g=m(b.position):s(7263,"Invalid value passed to config.position.",b.position));W=!0}W&&(xa(),wa());return q};window.ChessBoard.fenToObj=K;window.ChessBoard.objToFen=L})();
</script>

<div id="board" style='width: 501px;'></div>

<script>
function solve(n) {
  var ans = []
  solver([])
  return ans
  function solver(current) {
    if (current.length === n)
      ans.push(current)
    else
      for (var i=0; i < n; i++) {
        for (var j=0, l=current.length; j < l; j++) {
          var prev = current[j]
          if (prev === i)
            break
          if (prev-(l-j) === i)
            break
          if (prev+(l-j) === i)
            break
        }
        if (j === l)
          solver(current.concat([i]))
      }
  }
}

(function loop(solutions) {
  var cnt = 0
  var board = new ChessBoard('board', {
    moveSpeed: 'slow',
    position: ''
  });

  next()
  function next() {
    board.position(moveTo(solutions[cnt]))
    cnt++
    cnt %= solutions.length
    setTimeout(next, 900)
  }
})(shuffle(solve(8)))

function shuffle(arr) {
  for(var i=arr.length-1; i >= 1; i--) {
    var pos = randInt(0, i+1)
    var j = arr[pos]
    arr[pos] = arr[i]
    arr[i] = j
  }
  return arr
}
function randInt(s, e) {
  return Math.floor(Math.random() * (e-s))+s
}
function moveTo(solution) {
  var colToLet = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
  var pos = {}

  for(var i=0, l=solution.length; i < l; i++) {
    var col = i
    var row = solution[i]
    pos[colToLet[col] + (row+1)] = 'bQ'
  }
  return pos
}
</script>

        </section>

        

        <footer class="post-footer">
        	<!-- If we want to display author's name and bio -->
            
                <section class="author">
                	<header> <a href=""> <img class="profile" src="/assets/images/profile.png" alt="Zolmeister"></a></header>
                	<article>
                		<!-- Author Name -->
                    	<h4> Zoli Kahan </h4>
                    	<!-- Author Bio -->
                    	<p>
                    		<a target="_blank" href="https://zolikahan.com">Projects</a> |
                        <a target="_blank" href="https://github.com/Zolmeister">GitHub</a>
                    	</p>
                    </article>
                </section>
            

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=N Queens Problem - Backtracking&amp;url=https://zolmeister.com/2014/01/n-queens-problem-backtracking.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://zolmeister.com/2014/01/n-queens-problem-backtracking.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://zolmeister.com/2014/01/n-queens-problem-backtracking.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

            
            <section class="disqus">
        	    <div id="disqus_thread"></div>
              <script type="text/javascript">
                  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                  var disqus_shortname = 'zolmeister'; // required: replace example with your forum shortname

                  /* * * DON'T EDIT BELOW THIS LINE * * */
                  (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                  })();
              </script>

            </section>
            

        </footer>

    </article>

</main>


    <footer class="site-footer">
        <a class="subscribe icon-feed" href="feeds/posts/default"><span class="tooltip">Subscribe!</span></a>
        <div class="inner">
             <section class="copyright">All content copyright <a href="">Zolmeister</a> &copy;  &bull; All rights reserved.</section>
        </div>
    </footer>


    <script type="text/javascript" src="/assets/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-30570115-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
</body>
</html>
